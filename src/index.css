@tailwind base;
@tailwind components;
@tailwind utilities;

/* Global styles */
:root {
  --primary: #4f46e5;
  --primary-dark: #4338ca;
  
  /* Z-Index Scale */
  --z-base: 1;
  --z-dropdown: 100;
  --z-sticky: 200;
  --z-fixed: 300;
  --z-overlay: 400;
  --z-modal-backdrop: 9998;
  --z-modal: 9999;
  --z-modal-content: 10000;
  --z-tooltip: 10001;
  --z-toast: 10002;
}

/* App Download Reminder Animations */
@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slide-up {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slide-down {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out;
}

.animate-slide-up {
  animation: slide-up 0.4s ease-out;
}

.animate-slide-down {
  animation: slide-down 0.4s ease-out;
}

body {
  @apply antialiased text-gray-900;
  font-size: 14px; /* Reduce base font size */
  line-height: 1.5;
}

/* Typography improvements */
h1 { @apply text-2xl md:text-4xl lg:text-5xl font-bold; }
h2 { @apply text-xl md:text-2xl lg:text-3xl font-semibold; }
h3 { @apply text-lg md:text-xl font-medium; }
h4 { @apply text-base md:text-lg font-medium; }
p { @apply text-sm md:text-base leading-relaxed; }

/* Custom utility classes */
.btn {
  @apply px-3 py-2 text-sm rounded-lg font-medium transition-colors;
}

.btn-sm {
  @apply px-2 py-1 text-xs rounded-md font-medium transition-colors;
}

.btn-lg {
  @apply px-4 py-2 text-base rounded-lg font-medium transition-colors;
}

/* Compact spacing utilities */
.section-compact { @apply py-8 md:py-12; }
.section-normal { @apply py-12 md:py-16; }
.section-large { @apply py-16 md:py-20; }

/* Improved text scaling */
.text-hero { @apply text-2xl md:text-4xl lg:text-5xl; }
.text-section { @apply text-xl md:text-2xl lg:text-3xl; }
.text-card { @apply text-base md:text-lg; }
.text-body { @apply text-sm md:text-base; }

.btn-primary {
  @apply bg-indigo-600 text-white hover:bg-indigo-700;
}

.btn-secondary {
  @apply bg-white text-gray-700 border border-gray-200 hover:bg-gray-50;
}

/* Scrollbar utilities */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Smooth scrolling for horizontal containers */
.smooth-scroll {
  scroll-behavior: smooth;
}

/* Leaflet map styles */
.leaflet-container {
  width: 100%;
  height: 100%;
  z-index: 1;
}

/* Ensure Leaflet controls don't interfere with high z-index modals */
.leaflet-control-container {
  z-index: 1000 !important;
}

.leaflet-popup-pane {
  z-index: 700 !important;
}

.leaflet-tooltip-pane {
  z-index: 650 !important;
}

/* Force all Leaflet elements to stay below modals */
.leaflet-container,
.leaflet-control-container,
.leaflet-popup-pane,
.leaflet-tooltip-pane,
.leaflet-overlay-pane,
.leaflet-shadow-pane,
.leaflet-marker-pane,
.leaflet-tile-pane {
  z-index: 1 !important;
  position: relative !important;
}

/* Modal isolation */
.modal-backdrop {
  isolation: isolate;
  z-index: 99999 !important;
  position: fixed !important;
}

/* Hide map completely when modal is open */
body.modal-open .leaflet-container {
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

body.modal-open .leaflet-control-container {
  visibility: hidden !important;
  opacity: 0 !important;
}

/* Ensure map overlay properly blocks all interactions */
.map-overlay {
  cursor: not-allowed;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

/* Ensure modal content is always opaque and above everything */
.modal-content {
  background-color: white !important;
  position: relative !important;
  z-index: 100001 !important;
  isolation: isolate !important;
}

/* Floating cart styles */
.floating-cart {
  /* Ensure it doesn't interfere with mobile scrolling */
  touch-action: manipulation;
}

/* Smooth transitions for cart animations */
.cart-bounce {
  animation: cartBounce 0.6s ease-in-out;
}

@keyframes cartBounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-10px);
  }
  60% {
    transform: translateY(-5px);
  }
}

/* Global floating cart animations */
.animate-slide-down {
  animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.leaflet-popup-content-wrapper {
  border-radius: 0.5rem;
}

.leaflet-popup-content {
  margin: 0;
  padding: 0;
}

/* Fix Leaflet marker icon */
.leaflet-marker-icon {
  filter: drop-shadow(0 1px 2px rgb(0 0 0 / 0.1)) drop-shadow(0 1px 1px rgb(0 0 0 / 0.06));
}